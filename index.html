import { useEffect, useMemo, useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

type Lang = "EN" | "DE";

type Copy = {
  brand: string;
  nav: [string, string, string, string, string];
  contactNow: string;
  heroBadge: string;
  heroTitle: string;
  heroText: string;
  viewPackages: string;
  stats: [string, string][];
  servicesTitle: string;
  servicesText: string;
  services: [string, string][];
  industriesTitle: string;
  industriesText: string;
  industries: [string, string][];
  impactKicker: string;
  impactTitle: string;
  impactText: string;
  impactStats: [string, string][];
  impactNote: string;
  whyTitle: string;
  whyText: string;
  whyPoints: [string, string][];
  samplesTitle: string;
  samplesText: string;
  samplesCta: string;
  samplesUrl: string;
  packagesTitle: string;
  packagesText: string;
  packages: [string, string, string[]][];
  larger: string;
  faqTitle: string;
  faq: [string, string][];
  contactTitle: string;
  contactText: string;
  form: [string, string, string, string, string, string, string, string];
  send: string;
  footer: string;
};

const COPY: Record<Lang, Copy> = {
  EN: {
    brand: "Helios.Virtual",
    nav: ["Services", "Industries", "Packages", "FAQ", "Contact"],
    contactNow: "Contact now",
    heroBadge: "Hamburg • Matterport Pro3 • DE / EN",
    heroTitle: "Premium 3D tours for spaces that need to convert",
    heroText:
      "We create fast-turnaround Matterport Pro3 scans with a cinematic production mindset. Reduce empty viewings, increase trust, and present every space at its best.",
    viewPackages: "View packages",
    stats: [
      ["24h", "Typical delivery"],
      ["Pro3", "LiDAR scan"],
      ["DE / EN", "Communication"],
      ["Germany + EU", "On request"],
    ],
    servicesTitle: "Services",
    servicesText:
      "Core service: Matterport Pro3 3D tours. Optional add-ons: photo, video, drone and location pre-checks.",
    services: [
      [
        "Matterport Pro3 3D Tours",
        "High-accuracy LiDAR-based scanning for residential, commercial and complex spaces.",
      ],
      [
        "Photo Production",
        "Clean, high-quality stills for listings, websites and marketing materials.",
      ],
      [
        "Video Production",
        "Cinematic short-form content for presentations, social and ads.",
      ],
      [
        "Aerial / Drone",
        "Context-rich aerial perspectives for property and location storytelling.",
      ],
    ],
    whyTitle: "Why Helios",
    whyText:
      "Minimal process, premium output. We use Matterport Pro3 LiDAR for sharp, measurement-ready digital twins — backed by a cinema-grade production mindset.",
    whyPoints: [
      ["Pro3 LiDAR accuracy", "Matterport Pro3 captures high-resolution LiDAR scans for precise, reliable measurements."],
      ["24h delivery", "Fast turnaround for listings, launches and approvals."],
      ["Personal approach", "Each object is scoped individually for the best result."],
      ["Fast communication", "Clear updates, quick answers, predictable workflow."],
      ["Cinematic mindset", "A film-production approach to craft and presentation."],
    ],
    samplesTitle: "How does it look?",
    samplesText:
      "Open a demo tour to experience navigation, dollhouse view and measurement tools.",
    samplesCta: "View demo",
    samplesUrl: "https://matterport.com/gallery",
    industriesTitle: "Industries",
    industriesText:
      "From residential properties to medical, retail, sports and construction environments — we build 3D tours for nearly any space.",
    industries: [
      ["realestate", "Real Estate (apartments & homes)"],
      ["commercial", "Commercial Properties"],
      ["hospitality", "Hotels & Hospitality"],
      ["retail", "Retail (fashion & jewelry)"],
      ["showroom", "Showrooms & Galleries"],
      ["auto", "Car Dealerships"],
      ["culture", "Museums & Art spaces"],
      ["events", "Exhibitions & venues"],
      ["architecture", "Architecture (churches & landmarks)"],
      ["medical", "Medical Clinics"],
      ["sports", "Sports Facilities"],
      ["construction", "Construction Progress"],
      ["offices", "Coworking & Offices"],
      ["nature", "Nature reserves"],
    ],
    impactKicker: "BY THE NUMBERS",
    impactTitle: "What teams report after adopting digital twins",
    impactText:
      "These benchmark outcomes are often cited by Matterport customers. Use a 3D tour to reduce unnecessary visits, align stakeholders faster, and shorten decision cycles.",
    impactStats: [
      ["50%", "Reduction in travel needs."],
      ["80%", "Improved engagement."],
      ["70%", "Reduction in site survey costs and BIM file creation."],
      ["75%", "Of project issues resolved without escalation."],
    ],
    impactNote:
      "Note: figures shown are benchmark claims published by Matterport; actual results vary by project and workflow.",
    packagesTitle: "Packages",
    packagesText: "Simple pricing based on square meters and hosting period.",
    packages: [
      [
        "Essential Space",
        "from €290",
        ["Up to 100 m²", "Matterport Pro3 scan + processing", "3 months hosting"],
      ],
      [
        "Signature Space",
        "from €490",
        [
          "Up to 250 m²",
          "Matterport Pro3 scan + enhanced processing",
          "6 months hosting",
        ],
      ],
      [
        "Portfolio Space",
        "from €890",
        ["Up to 500 m²", "Matterport Pro3 scan + advanced polish", "12 months hosting"],
      ],
    ],
    larger: "Larger spaces or extra needs (photo / video / drone) — we’ll create a tailored quote.",
    faqTitle: "FAQ",
    faq: [
      [
        "How fast is delivery?",
        "Most projects are delivered within 24 hours, depending on scope.",
      ],
      ["Is hosting included?", "Yes — packages include hosting for 3, 6 or 12 months."],
      [
        "Do you work only in Hamburg?",
        "Hamburg is our base. Germany and EU projects are available on request.",
      ],
      [
        "What is the booking policy?",
        "50% prepayment secures the date. One reschedule is possible with advance notice.",
      ],
    ],
    contactTitle: "Contact",
    contactText:
      "Send object type, size, address and desired date — we’ll reply with a clear quote.",
    form: [
      "Name",
      "E-mail",
      "Phone",
      "Object type",
      "Address",
      "Required services",
      "Preferred shooting date",
      "Comment",
    ],
    send: "Send request",
    footer: "All rights reserved.",
  },
  DE: {
    brand: "Helios.Virtual",
    nav: ["Leistungen", "Branchen", "Pakete", "FAQ", "Kontakt"],
    contactNow: "Jetzt anfragen",
    heroBadge: "Hamburg • Matterport Pro3 • DE / EN",
    heroTitle: "Premium 3D-Touren für Räume, die überzeugen müssen",
    heroText:
      "Wir erstellen schnelle Matterport Pro3 Scans mit cineastischem Produktionsansatz. Weniger leere Besichtigungen, mehr Vertrauen und eine stärkere Präsentation Ihres Objekts.",
    viewPackages: "Pakete ansehen",
    stats: [
      ["24h", "Typische Lieferung"],
      ["Pro3", "LiDAR-Scan"],
      ["DE / EN", "Kommunikation"],
      ["Deutschland + EU", "auf Anfrage"],
    ],
    servicesTitle: "Leistungen",
    servicesText:
      "Kernleistung: Matterport Pro3 3D-Touren. Optional: Foto, Video, Drohne und Location-Precheck.",
    services: [
      [
        "Matterport Pro3 3D-Touren",
        "Präzises LiDAR-Scanning für Wohn-, Gewerbe- und komplexe Flächen.",
      ],
      ["Foto-Produktion", "Hochwertige Fotos für Exposés, Webseiten und Marketing."],
      ["Video-Produktion", "Cineastische Kurzformate für Präsentation, Social und Ads."],
      ["Drohnenaufnahmen", "Aussagekräftige Luftperspektiven für Lage und Umfeld."],
    ],
    whyTitle: "Warum Helios",
    whyText:
      "Minimaler Prozess, Premium-Ergebnis. Wir nutzen Matterport Pro3 LiDAR für messgenaue, hochauflösende digitale Zwillinge — mit cineastischem Produktionsansatz.",
    whyPoints: [
      [
        "Pro3 LiDAR-Präzision",
        "Matterport Pro3 erstellt hochauflösende LiDAR-Scans für präzise, zuverlässige Maße.",
      ],
      ["Lieferung in 24h", "Schnelle Abgabe für Exposé, Launch und Freigaben."],
      [
        "Individueller Ansatz",
        "Jedes Objekt wird passend gescoped — für das beste Ergebnis.",
      ],
      [
        "Schnelle Kommunikation",
        "Klare Updates, schnelle Antworten, planbarer Ablauf.",
      ],
      [
        "Cinematic Mindset",
        "Filmproduktions-Ansatz für Look, Qualität und Präsentation.",
      ],
    ],
    samplesTitle: "Wie sieht das aus?",
    samplesText:
      "Öffnen Sie eine Demo-Tour und erleben Sie Navigation, Dollhouse-Ansicht und Messfunktionen.",
    samplesCta: "Demo ansehen",
    samplesUrl: "https://matterport.com/gallery",
    industriesTitle: "Branchen",
    industriesText:
      "Von Wohnimmobilien bis Medizin, Retail, Sport und Baufortschritt — wir erstellen 3D-Touren für nahezu jede Art von Fläche.",
    industries: [
      ["realestate", "Immobilien (Wohnungen & Häuser)"],
      ["commercial", "Gewerbeimmobilien"],
      ["hospitality", "Hotels & Hospitality"],
      ["retail", "Einzelhandel (Mode & Schmuck)"],
      ["showroom", "Showrooms & Galerien"],
      ["auto", "Autohäuser"],
      ["culture", "Museen & Art-Spaces"],
      ["events", "Messen & Locations"],
      ["architecture", "Architektur (Kirchen & Sehenswürdigkeiten)"],
      ["medical", "Kliniken & Praxen"],
      ["sports", "Sportanlagen"],
      ["construction", "Baufortschritt"],
      ["offices", "Coworking & Büros"],
      ["nature", "Naturschutz & Natur"],
    ],
    impactKicker: "ZAHLEN & FAKTEN",
    impactTitle: "Was Teams nach dem Einsatz digitaler Zwillinge berichten",
    impactText:
      "Diese Benchmark-Werte werden häufig von Matterport-Kunden genannt. 3D-Touren reduzieren unnötige Vor-Ort-Termine, beschleunigen Abstimmungen und verkürzen Entscheidungswege.",
    impactStats: [
      ["50%", "Weniger Reise-/Anfahrtsbedarf."],
      ["80%", "Höheres Engagement."],
      ["70%", "Weniger Kosten für Site-Surveys und BIM-Erstellung."],
      ["75%", "Projektprobleme ohne Eskalation gelöst."],
    ],
    impactNote:
      "Hinweis: Werte sind Benchmark-Aussagen von Matterport; tatsächliche Ergebnisse variieren je nach Projekt und Workflow.",
    packagesTitle: "Pakete",
    packagesText: "Transparente Preise nach Quadratmetern und Hosting-Laufzeit.",
    packages: [
      [
        "Essential Space",
        "ab 290 €",
        ["Bis 100 m²", "Matterport Pro3 Scan + Processing", "3 Monate Hosting"],
      ],
      [
        "Signature Space",
        "ab 490 €",
        [
          "Bis 250 m²",
          "Matterport Pro3 Scan + Enhanced Processing",
          "6 Monate Hosting",
        ],
      ],
      [
        "Portfolio Space",
        "ab 890 €",
        ["Bis 500 m²", "Matterport Pro3 Scan + Advanced Polish", "12 Monate Hosting"],
      ],
    ],
    larger: "Größere Flächen oder Zusatzleistungen (Foto / Video / Drohne) — wir erstellen ein individuelles Angebot.",
    faqTitle: "FAQ",
    faq: [
      [
        "Wie schnell ist die Lieferung?",
        "Die meisten Projekte liefern wir je nach Umfang innerhalb von 24 Stunden.",
      ],
      ["Ist Hosting enthalten?", "Ja — je nach Paket 3, 6 oder 12 Monate."],
      [
        "Arbeitet ihr nur in Hamburg?",
        "Hamburg ist unsere Basis. Projekte in Deutschland und der EU auf Anfrage.",
      ],
      [
        "Wie läuft die Buchung?",
        "50% Anzahlung sichern den Termin. Eine Umbuchung ist mit Vorlauf möglich.",
      ],
    ],
    contactTitle: "Kontakt",
    contactText:
      "Senden Sie Objektart, Größe, Adresse und Wunschdatum — wir antworten mit einem klaren Angebot.",
    form: [
      "Name",
      "E-Mail",
      "Telefon",
      "Objektart",
      "Adresse",
      "Benötigte Leistungen",
      "Gewünschtes Aufnahmedatum",
      "Kommentar",
    ],
    send: "Anfrage senden",
    footer: "Alle Rechte vorbehalten.",
  },
};

const IndustryIcon = ({ name }: { name: string }) => {
  const common = {
    width: 20,
    height: 20,
    viewBox: "0 0 24 24",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    className: "text-zinc-200",
  } as const;

  switch (name) {
    case "realestate":
      return (
        <svg {...common}>
          <path d="M3 10.5 12 3l9 7.5" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M5 9.5V21h14V9.5" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M10 21v-6h4v6" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    case "commercial":
      return (
        <svg {...common}>
          <path d="M4 21V4h16v17" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M8 8h2M8 12h2M8 16h2M14 8h2M14 12h2M14 16h2" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    case "hospitality":
      return (
        <svg {...common}>
          <path d="M4 12V9a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v3" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M3 12h18v6H3z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M7.5 9.5h1" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M4 18v3M20 18v3" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    case "retail":
      return (
        <svg {...common}>
          <path d="M6 7h12l-1 14H7L6 7z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M9 7a3 3 0 0 1 6 0" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    case "showroom":
      return (
        <svg {...common}>
          <path d="M4 21V7h16v14" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M7 10h10M7 14h10M7 18h6" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    case "auto":
      return (
        <svg {...common}>
          <path d="M6 15h12l1-3-2-5H7l-2 5 1 3z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M6 15v3M18 15v3" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M7.5 18.5h0M16.5 18.5h0" stroke="currentColor" strokeWidth="3" strokeLinecap="round" />
        </svg>
      );
    case "culture":
      return (
        <svg {...common}>
          <path d="M4 10h16" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M6 10V20M10 10V20M14 10V20M18 10V20" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M3 20h18" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M12 4 4 10h16L12 4z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    case "events":
      return (
        <svg {...common}>
          <path d="M5 8h14v10H5z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M8 8V6M16 8V6" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M8 12h8" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    case "architecture":
      return (
        <svg {...common}>
          <path d="M12 3v18" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M7 6h10" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M8 21h8" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M9 10h6l-1 11h-4L9 10z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    case "medical":
      return (
        <svg {...common}>
          <path d="M12 6v12M6 12h12" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M7 4h10v16H7z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    case "sports":
      return (
        <svg {...common}>
          <path d="M7 10v4M17 10v4" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M5 9h2v6H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M17 9h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2V9z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M7 11h10" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    case "construction":
      return (
        <svg {...common}>
          <path d="M6 12a6 6 0 1 1 12 0" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M4 12h16v6H4z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M9 12V9a3 3 0 0 1 6 0v3" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
        </svg>
      );
    case "offices":
      return (
        <svg {...common}>
          <path d="M4 21V9h8v12" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M12 21V5h8v16" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M7 12h2M7 16h2M16 9h2M16 13h2M16 17h2" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    case "nature":
      return (
        <svg {...common}>
          <path d="M20 4c-7 0-12 5-12 12 0 3 1 5 3 7 7 0 12-5 12-12 0-3-1-5-3-7z" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" strokeLinejoin="round" />
          <path d="M8 16c3-2 6-3 9-3" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
    default:
      return (
        <svg {...common}>
          <path d="M12 2v20" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
          <path d="M2 12h20" stroke="currentColor" strokeWidth="1.7" strokeLinecap="round" />
        </svg>
      );
  }
};

export default function Hamburg3DToursLanding() {
  const [lang, setLang] = useState<Lang>("EN");
  const [activeSection, setActiveSection] = useState("top");
  const [showPreloader, setShowPreloader] = useState(true);
  const [tilt, setTilt] = useState({ x: 0, y: 0 });
  const [motionEnabled, setMotionEnabled] = useState(false);
  const [motionNeedsPermission, setMotionNeedsPermission] = useState(false);

  const clamp = (v: number, min: number, max: number) => Math.max(min, Math.min(max, v));
  const prefersReducedMotion =
    typeof window !== "undefined" &&
    window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches;

  const requestDeviceMotion = async () => {
    if (prefersReducedMotion) return;
    const anyWin = window as any;
    if (typeof anyWin.DeviceOrientationEvent?.requestPermission === "function") {
      try {
        const res = await anyWin.DeviceOrientationEvent.requestPermission();
        if (res === "granted") {
          setMotionEnabled(true);
          setMotionNeedsPermission(false);
        }
      } catch {
        // no-op
      }
    } else {
      setMotionEnabled(true);
      setMotionNeedsPermission(false);
    }
  };

  const scrollToId = (id: string) => {
    const el = document.getElementById(id);
    if (!el) return;
    const y = el.getBoundingClientRect().top + window.scrollY - 88;
    window.scrollTo({ top: y, behavior: "smooth" });
  };

  useEffect(() => {
    const timer = window.setTimeout(() => setShowPreloader(false), 800);

    const anyWin = window as any;
    if (typeof anyWin.DeviceOrientationEvent?.requestPermission === "function") {
      setMotionNeedsPermission(true);
    }

    const onMouseMove = (e: MouseEvent) => {
      if (prefersReducedMotion) return;
      if (motionEnabled) return;
      const nx = (e.clientX / window.innerWidth - 0.5) * 2;
      const ny = (e.clientY / window.innerHeight - 0.5) * 2;
      setTilt({ x: clamp(nx, -1, 1), y: clamp(ny, -1, 1) });
    };

    const onOrientation = (ev: DeviceOrientationEvent) => {
      if (prefersReducedMotion) return;
      if (!motionEnabled) return;
      const g = typeof ev.gamma === "number" ? ev.gamma : 0;
      const b = typeof ev.beta === "number" ? ev.beta : 0;
      const x = clamp(g / 20, -1, 1);
      const y = clamp(b / 25, -1, 1);
      setTilt({ x, y });
    };

    window.addEventListener("mousemove", onMouseMove, { passive: true });
    window.addEventListener("deviceorientation", onOrientation, { passive: true });

    const ids = ["top", "services", "why", "industries", "impact", "pricing", "faq", "contact"];
    const observers: IntersectionObserver[] = [];

    ids.forEach((id) => {
      const el = document.getElementById(id);
      if (!el) return;
      const obs = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) setActiveSection(id);
          });
        },
        { rootMargin: "-40% 0px -50% 0px", threshold: 0.01 }
      );
      obs.observe(el);
      observers.push(obs);
    });

    return () => {
      window.clearTimeout(timer);
      observers.forEach((o) => o.disconnect());
      window.removeEventListener("mousemove", onMouseMove as any);
      window.removeEventListener("deviceorientation", onOrientation as any);
    };
  }, [motionEnabled, prefersReducedMotion]);

  const t = useMemo(() => COPY[lang], [lang]);

  return (
    <>
      <AnimatePresence>
        {showPreloader && (
          <motion.div
            initial={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.35 }}
            className="fixed inset-0 z-[999] flex items-center justify-center bg-zinc-950"
          >
            <motion.div
              initial={{ opacity: 0, y: 6 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 0.35 }}
              className="text-center"
            >
              <div className="text-xl font-semibold tracking-tight text-white">Helios.Virtual</div>
              <div className="mt-2 text-xs text-zinc-400">Loading experience…</div>
            </motion.div>
          </motion.div>
        )}
      </AnimatePresence>

      <div className="min-h-screen bg-zinc-950 text-zinc-100">
        <header className="sticky top-0 z-30 border-b border-zinc-800/80 bg-zinc-950/85 backdrop-blur">
          <div className="mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-3 md:px-8">
            <button
              type="button"
              onClick={() => scrollToId("top")}
              className="text-lg font-semibold tracking-tight"
            >
              {t.brand}
            </button>

            <nav className="hidden items-center gap-6 text-sm md:flex">
              <button
                type="button"
                onClick={() => scrollToId("services")}
                className={`hover:text-white ${activeSection === "services" ? "text-white" : "text-zinc-300"}`}
              >
                {t.nav[0]}
              </button>
              <button
                type="button"
                onClick={() => scrollToId("industries")}
                className={`hover:text-white ${activeSection === "industries" ? "text-white" : "text-zinc-300"}`}
              >
                {t.nav[1]}
              </button>
              <button
                type="button"
                onClick={() => scrollToId("pricing")}
                className={`hover:text-white ${activeSection === "pricing" ? "text-white" : "text-zinc-300"}`}
              >
                {t.nav[2]}
              </button>
              <button
                type="button"
                onClick={() => scrollToId("faq")}
                className={`hover:text-white ${activeSection === "faq" ? "text-white" : "text-zinc-300"}`}
              >
                {t.nav[3]}
              </button>
              <button
                type="button"
                onClick={() => scrollToId("contact")}
                className={`hover:text-white ${activeSection === "contact" ? "text-white" : "text-zinc-300"}`}
              >
                {t.nav[4]}
              </button>
            </nav>

            <div className="flex items-center gap-2">
              <div className="relative rounded-full border border-zinc-700 bg-zinc-900 p-1">
                <motion.div
                  className="absolute bottom-1 top-1 w-[calc(50%-4px)] rounded-full bg-white"
                  animate={{ x: lang === "EN" ? 0 : "100%" }}
                  transition={{ type: "spring", stiffness: 420, damping: 32 }}
                />
                <div className="relative z-10 flex text-xs font-semibold">
                  <button
                    type="button"
                    onClick={() => setLang("EN")}
                    className={`rounded-full px-3 py-1.5 ${lang === "EN" ? "text-zinc-900" : "text-zinc-300"}`}
                  >
                    EN
                  </button>
                  <button
                    type="button"
                    onClick={() => setLang("DE")}
                    className={`rounded-full px-3 py-1.5 ${lang === "DE" ? "text-zinc-900" : "text-zinc-300"}`}
                  >
                    DE
                  </button>
                </div>
              </div>

              <motion.button
                type="button"
                onClick={() => scrollToId("contact")}
                className="rounded-2xl border border-zinc-700 bg-white px-4 py-2 text-sm font-medium text-zinc-900 shadow-sm"
                animate={{ scale: [1, 1.02, 1] }}
                transition={{ duration: 2.8, repeat: Infinity, repeatDelay: 4.5, ease: "easeInOut" }}
                whileHover={{ scale: 1.03 }}
              >
                {t.contactNow}
              </motion.button>
            </div>
          </div>
        </header>

        <section
          id="top"
          className="mx-auto grid w-full max-w-7xl gap-10 px-4 py-14 md:grid-cols-2 md:items-center md:px-8 md:py-24"
        >
          <div>
            <p className="mb-4 inline-flex rounded-full border border-zinc-700 px-3 py-1 text-xs font-medium text-zinc-300">
              {t.heroBadge}
            </p>
            <AnimatePresence mode="wait">
              <motion.div
                key={`${lang}-hero`}
                initial={{ opacity: 0, y: 6 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0, y: -6 }}
                transition={{ duration: 0.2 }}
              >
                <h1 className="text-3xl font-bold leading-tight tracking-tight md:text-5xl">
                  {t.heroTitle}
                </h1>
                <p className="mt-5 max-w-xl text-base leading-relaxed text-zinc-300 md:text-lg">
                  {t.heroText}
                </p>
              </motion.div>
            </AnimatePresence>
            <div className="mt-7 flex flex-wrap gap-3">
              <button
                type="button"
                onClick={() => scrollToId("contact")}
                className="rounded-2xl bg-white px-5 py-3 text-sm font-semibold text-zinc-900 shadow hover:opacity-90"
              >
                {t.contactNow}
              </button>
              <button
                type="button"
                onClick={() => scrollToId("pricing")}
                className="rounded-2xl border border-zinc-700 px-5 py-3 text-sm font-semibold text-zinc-100 hover:bg-zinc-900"
              >
                {t.viewPackages}
              </button>
            </div>
            <div className="mt-7 grid max-w-lg grid-cols-2 gap-3 text-sm text-zinc-300 sm:grid-cols-4">
              {t.stats.map(([value, label]) => (
                <motion.div
                  key={label}
                  whileHover={{ y: -2 }}
                  className="rounded-2xl border border-zinc-800 bg-zinc-900/60 p-3"
                >
                  <div className="text-base font-semibold text-white">{value}</div>
                  <div className="text-xs">{label}</div>
                </motion.div>
              ))}
            </div>
          </div>

          <motion.div
            initial={{ opacity: 0, y: 10 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            transition={{ duration: 0.35 }}
            className="rounded-3xl border border-zinc-800 bg-zinc-900 p-5 shadow-sm md:p-7"
          >
            <motion.div
              className="relative aspect-[4/3] w-full overflow-hidden rounded-2xl border border-zinc-800 bg-zinc-950"
              style={{
                transform: `translate3d(${tilt.x * 10}px, ${tilt.y * 10}px, 0) scale(1.02)`,
              }}
              transition={{ type: "spring", stiffness: 140, damping: 22 }}
              aria-label="Interactive hero preview"
            >
              <div className="absolute inset-0">
                <div className="h-full w-full bg-gradient-to-b from-zinc-900/20 via-zinc-900/10 to-zinc-950" />
              </div>

              <div className="relative flex h-full items-center justify-center p-6 text-center">
                <div>
                  <div className="text-sm font-medium text-zinc-200">Matterport Tour Preview</div>
                  <div className="mt-2 text-xs text-zinc-500">Replace with embedded tour later</div>
                  {(motionNeedsPermission || !motionEnabled) && !prefersReducedMotion && (
                    <button
                      type="button"
                      onClick={requestDeviceMotion}
                      className="mt-4 rounded-2xl border border-zinc-700 bg-zinc-900/60 px-4 py-2 text-xs font-semibold text-zinc-200 hover:bg-zinc-900"
                    >
                      {motionNeedsPermission ? "Tap to enable motion" : "Enable motion"}
                    </button>
                  )}
                </div>
              </div>
            </motion.div>
          </motion.div>
        </section>

        <section id="services" className="border-y border-zinc-800 bg-zinc-900/40 py-14 md:py-20">
          <div className="mx-auto w-full max-w-7xl px-4 md:px-8">
            <h2 className="text-2xl font-bold tracking-tight md:text-4xl">{t.servicesTitle}</h2>
            <p className="mt-3 max-w-3xl text-zinc-300">{t.servicesText}</p>
            <div className="mt-8 grid gap-4 md:grid-cols-2 lg:grid-cols-4">
              {t.services.map((card) => (
                <motion.article
                  key={card[0]}
                  whileHover={{ y: -4, scale: 1.01 }}
                  transition={{ type: "spring", stiffness: 260, damping: 24 }}
                  className="rounded-2xl border border-zinc-800 bg-zinc-950 p-5 shadow-sm"
                >
                  <h3 className="text-base font-semibold">{card[0]}</h3>
                  <p className="mt-2 text-sm leading-relaxed text-zinc-400">{card[1]}</p>
                </motion.article>
              ))}
            </div>
          </div>
        </section>

        <section id="why" className="mx-auto w-full max-w-7xl px-4 py-14 md:px-8 md:py-20">
          <div className="grid gap-8 lg:grid-cols-12 lg:items-start">
            <div className="lg:col-span-5">
              <h2 className="text-2xl font-bold tracking-tight md:text-4xl">{t.whyTitle}</h2>
              <p className="mt-3 max-w-xl text-zinc-300">{t.whyText}</p>
              <div className="mt-6 rounded-3xl border border-zinc-800 bg-zinc-900/30 p-5">
                <div className="text-sm font-semibold text-white">{t.samplesTitle}</div>
                <p className="mt-2 text-sm text-zinc-400">{t.samplesText}</p>
                <a
                  href={t.samplesUrl}
                  target="_blank"
                  rel="noreferrer"
                  className="mt-4 inline-flex items-center justify-center rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-zinc-900 hover:opacity-90"
                >
                  {t.samplesCta}
                </a>
              </div>
            </div>

            <div className="lg:col-span-7">
              <div className="grid gap-4 md:grid-cols-2">
                {t.whyPoints.map(([title, desc]) => (
                  <motion.div
                    key={title}
                    whileHover={{ y: -4, scale: 1.01 }}
                    transition={{ type: "spring", stiffness: 260, damping: 24 }}
                    className="rounded-3xl border border-zinc-800 bg-zinc-950 p-6"
                  >
                    <div className="text-base font-semibold text-white">{title}</div>
                    <div className="mt-2 text-sm leading-relaxed text-zinc-400">{desc}</div>
                  </motion.div>
                ))}
              </div>
            </div>
          </div>
        </section>

        <section id="industries" className="mx-auto w-full max-w-7xl px-4 py-14 md:px-8 md:py-20">
          <h2 className="text-2xl font-bold tracking-tight md:text-4xl">{t.industriesTitle}</h2>
          <p className="mt-3 max-w-3xl text-zinc-300">{t.industriesText}</p>
          <div className="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            {t.industries.map(([key, label]) => (
              <motion.div
                key={key}
                whileHover={{ y: -3, scale: 1.01 }}
                transition={{ type: "spring", stiffness: 260, damping: 24 }}
                className="flex items-start gap-3 rounded-3xl border border-zinc-800 bg-zinc-900/30 p-4"
              >
                <div className="mt-0.5 flex h-9 w-9 items-center justify-center rounded-2xl border border-zinc-800 bg-zinc-950">
                  <IndustryIcon name={key} />
                </div>
                <div className="text-sm font-medium text-zinc-100">{label}</div>
              </motion.div>
            ))}
          </div>
        </section>

        <section id="impact" className="border-y border-zinc-800 bg-zinc-900/40 py-14 md:py-20">
          <div className="mx-auto w-full max-w-7xl px-4 md:px-8">
            <div className="max-w-3xl">
              <div className="text-xs font-semibold tracking-[0.22em] text-zinc-400">{t.impactKicker}</div>
              <h2 className="mt-3 text-2xl font-bold tracking-tight md:text-4xl">{t.impactTitle}</h2>
              <p className="mt-3 text-zinc-300">{t.impactText}</p>
            </div>

            <div className="mt-10 grid gap-4 md:grid-cols-2">
              {t.impactStats.map(([pct, label]) => (
                <motion.div
                  key={pct + label}
                  whileHover={{ y: -3 }}
                  transition={{ type: "spring", stiffness: 260, damping: 24 }}
                  className="rounded-3xl border border-zinc-800 bg-zinc-950 p-6"
                >
                  <div className="text-4xl font-bold tracking-tight text-white md:text-5xl">{pct}</div>
                  <div className="mt-2 text-sm leading-relaxed text-zinc-300">{label}</div>
                </motion.div>
              ))}
            </div>

            <p className="mt-5 text-xs text-zinc-500">{t.impactNote}</p>
            <div className="mt-6">
              <button
                type="button"
                onClick={() => scrollToId("contact")}
                className="rounded-2xl bg-white px-5 py-3 text-sm font-semibold text-zinc-900 shadow hover:opacity-90"
              >
                {t.contactNow}
              </button>
            </div>
          </div>
        </section>

        <section id="pricing" className="border-y border-zinc-800 bg-zinc-900/40 py-14 md:py-20">
          <div className="mx-auto w-full max-w-7xl px-4 md:px-8">
            <h2 className="text-2xl font-bold tracking-tight md:text-4xl">{t.packagesTitle}</h2>
            <p className="mt-3 max-w-2xl text-zinc-300">{t.packagesText}</p>
            <div className="mt-8 grid gap-4 lg:grid-cols-3">
              {t.packages.map((p, idx) => {
                const highlight = idx === 1;
                return (
                  <motion.div
                    key={p[0]}
                    whileHover={{ y: -6, scale: 1.015 }}
                    transition={{ type: "spring", stiffness: 280, damping: 22 }}
                    className={`rounded-3xl border p-6 shadow-sm ${
                      highlight ? "border-white bg-white text-zinc-900" : "border-zinc-800 bg-zinc-950"
                    }`}
                  >
                    <div className="text-sm font-medium opacity-80">{p[0]}</div>
                    <div className="mt-1 text-3xl font-bold">{p[1]}</div>
                    <ul className="mt-5 space-y-2 text-sm">
                      {p[2].map((f) => (
                        <li key={f}>• {f}</li>
                      ))}
                    </ul>
                    <button
                      type="button"
                      onClick={() => scrollToId("contact")}
                      className={`mt-6 inline-block rounded-2xl px-4 py-2 text-sm font-semibold ${
                        highlight ? "bg-zinc-900 text-white" : "bg-white text-zinc-900"
                      }`}
                    >
                      {t.contactNow}
                    </button>
                  </motion.div>
                );
              })}
            </div>
            <p className="mt-4 text-sm text-zinc-400">{t.larger}</p>
          </div>
        </section>

        <section id="faq" className="mx-auto w-full max-w-4xl px-4 py-14 md:px-8 md:py-20">
          <h2 className="text-2xl font-bold tracking-tight md:text-4xl">{t.faqTitle}</h2>
          <div className="mt-8 space-y-3">
            {t.faq.map(([q, a]) => (
              <details key={q} className="rounded-2xl border border-zinc-800 bg-zinc-900/40 p-4">
                <summary className="cursor-pointer list-none font-semibold">{q}</summary>
                <p className="mt-2 text-sm text-zinc-400">{a}</p>
              </details>
            ))}
          </div>
        </section>

        <section id="contact" className="border-t border-zinc-800 bg-zinc-950">
          <div className="mx-auto grid w-full max-w-7xl gap-6 px-4 py-14 md:grid-cols-2 md:px-8 md:py-20">
            <div className="rounded-3xl border border-zinc-800 bg-zinc-900/40 p-6">
              <h2 className="text-2xl font-bold tracking-tight">{t.contactTitle}</h2>
              <p className="mt-3 text-zinc-300">{t.contactText}</p>
              <div className="mt-6 space-y-2 text-sm">
                <p>
                  <strong>E-mail:</strong> hello@helios-virtual.de
                </p>
                <p>
                  <strong>Phone / WhatsApp:</strong> +49 (to be added)
                </p>
                <p>
                  <strong>Base:</strong> Hamburg, Germany
                </p>
              </div>
            </div>
            <form className="rounded-3xl border border-zinc-800 bg-zinc-900/40 p-6">
              {t.form.slice(0, 7).map((label) => (
                <div key={label}>
                  <label className="mb-2 block text-sm font-medium">{label}</label>
                  <input className="mb-4 w-full rounded-xl border border-zinc-700 bg-zinc-950 px-3 py-2 text-zinc-100 outline-none ring-white/20 focus:ring" />
                </div>
              ))}
              <label className="mb-2 block text-sm font-medium">{t.form[7]}</label>
              <textarea
                rows={4}
                className="w-full rounded-xl border border-zinc-700 bg-zinc-950 px-3 py-2 text-zinc-100 outline-none ring-white/20 focus:ring"
              />
              <button
                type="button"
                className="mt-4 rounded-2xl bg-white px-5 py-3 text-sm font-semibold text-zinc-900 hover:opacity-90"
              >
                {t.send}
              </button>
            </form>
          </div>
        </section>

        <footer className="border-t border-zinc-800 py-8 text-center text-sm text-zinc-500">
          © {new Date().getFullYear()} Helios.Virtual. {t.footer}
        </footer>
      </div>
    </>
  );
}

/*
Manual test checklist:
1) App compiles with no TS/JSX syntax errors.
2) Preloader appears for ~0.8s and fades out.
3) EN/DE switch updates all page copy.
4) Header nav buttons scroll to their sections and active state updates.
5) "Why" section appears between Services and Industries and includes 4 reason cards.
6) "View demo" opens Matterport gallery in a new tab.
7) Impact section appears after Industries and before Packages.
8) CTA inside Impact scrolls to Contact.
9) "Contact now" (header + hero + packages) smooth-scrolls to #contact with header offset.
10) "View packages" smooth-scrolls to #pricing with header offset.
*/
